metadata:
  name: simple demo
  description: mostly just for local dev

modules:
  local_server: 
    Server:
      port: 8080
      root_context: /
      inputs:
        p: 
          Float: { start: 1.0, min: 0.0, max: 10.0, step: 0.01 }
        i: 
          Float: { start: 0.0, min: 0.0, max: 10.0, step: 0.01 }
        d: 
          Float: { start: 0.0, min: 0.0, max: 10.0, step: 0.01 }
        heading: 
          Float: { start: 0.0, min: -3.14, max: 3.14, step: 0.0001}
        heading_target: 
          Float: { start: 0.0, min: -3.14, max: 3.14, step: 0.0001}
      outputs:
        steer: Float
      endpoints: 
        "/ws":
          WebSocket: 
            inputs: [ p, i, d, heading, heading_target ]
            outputs: [ steer ]
  
transformers:
  pid:
    PID:
      p: local_server.p
      i: local_server.i
      d: local_server.d
      set_point: local_server.heading_target 
      process_var: local_server.heading
      period_ms: 100 


pipes:
  - { from: pid.value, to: local_server.steer }
